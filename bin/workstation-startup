#!/bin/bash

while true; do
  echo -e "GET http://google.com HTTP/1.0\n\n" | nc google.com 80 > /dev/null 2>&1
  if [ $? -eq 0 ]; then
    ps -ef | egrep "[g]uake" > /dev/null 2>&1
    if [ $? -eq 0 ]; then
      ssh-add-persistently dev-test1 github;
      guake-setup;
      update-atom-ftpconfig /home/jonathanb/project-environments/dev-test1/.ftpconfig
      sleep 3;
      ssh-add -D;
      exit 0;
    else
      echo "Refusing to setup your workstation because guake isnt running!";
      exit 255;
    fi;
  else
      echo "Refusing to setup your workstation because you are offline!";
      exit 255;
  fi;
done;

